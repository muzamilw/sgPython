#:kivy 1.9.0
#:import get_color_from_hex kivy.utils.get_color_from_hex
#import progressbar

<Ready>:
    canvas:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "data//bg.jpg"

    # MDBackdrop:
    #     id: backdrop
    #     # on_open: home.opening_animation_backdrop_components(backdrop, backlayer)
    #     # on_close:
    #     #     backlayer.ids.screen_manager.current = "settings"
    #     #     home.closing_animation_backdrop_components(backdrop, backlayer)
    #     # left_action_items: [['menu', lambda x: self.open()]]
    #     title: "Instagram Status"
    #     header_text: "Menu:"    
   
    
    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 1

        MDToolbar:
            id : tbar
            title: "Instagram Status"
            elevation: 10
            type: "top"
            right_action_items: [["reload", lambda x: root.RefreshManifest()],["details", lambda x: root.showLog()],["home-outline", lambda x: root.navToHome()],["logout", lambda x: root.logoutConfirm()]]
            # ["ray-start-arrow", lambda x: root.startBot()],
        
        MDGridLayout:
            orientation:'horizontal'
            # md_bg_color: app.theme_cls.primary_light 
            size_hint: 1, 0.8
            cols:3
            valgin:'top'
        
        
            MDStackLayout: #username, messeges
                orientation:'lr-tb'
                size_hint: 0.2, 1   
                

                MDLabel:
                    text : ''
                    size_hint: 1, 0.1

                Image:
                    source: "data//iglogo.png"
                    size_hint: 1, None
                    size: dp(50), dp(50)
                    pos_hint: {"center_y": 0}
                    valgin:'top'
                
                MDLabel:
                    text : ''
                    size_hint: 1, 0.75


            MDStackLayout: #username, messeges
                orientation:'lr-tb'
                size_hint: 1, 1   

                MDLabel:
                    font_style: 'H5'
                    theme_text_color: 'Primary'
                    size_hint: 1, 0.5
                    text: ""
                    halign: 'left'
                    id: lblusername
                    
                MDBoxLayout:
                    id: pnlNotStarted
                    size_hint: 1, 0.25
                    orientation:'horizontal'
                    # md_bg_color: app.theme_cls.primary_dark   
                    
                    MDLabel:
                        text: "Next growth session will start today at : "
                        id :lblAutoStartLabel
                        font_size: '20dp'
                        size_hint: 0.8, 0.5
                        halign:"left"

                    MDLabel:
                        text: ""
                        id :lblAutoStart
                        font_size: '22dp'
                        size_hint: 0.2, 0.5
                        halign:"left"
                        text_color: get_color_from_hex("#23bd08")
                        theme_text_color: "Custom"
                            

                MDStackLayout:
                    id:pnlStarted
                    size_hint: 1, None
                    orientation:'lr-tb'
                    cols : 2
                    # md_bg_color: get_color_from_hex("#23bd08")

                    MDLabel:
                        text: "Growth Session Started on"
                        font_size: '17dp'
                        size_hint: 0.7, 0.3
                        halign:"left"
                        padding_y:0
                    
                    MDLabel:
                        id: lblStartTime
                        text: "03:33"
                        font_size: '20dp'
                        size_hint: 0.3, 0.3
                        halign:"left"
                        text_color: get_color_from_hex("#23bd08")
                        theme_text_color: "Custom"
                        padding_y:0
                        
                    MDLabel:
                        text: "Estimated time remaining for session to complete all actions :"
                        font_size: '17dp'
                        size_hint: 0.7, 0.5
                        halign:"left"
                        padding_y:10
                       
                    MDLabel:
                        id: lblTotalTime
                        text: "1:33"
                        font_size: '20dp'
                        size_hint: 0.3, 0.5
                        halign:"left"
                        text_color: get_color_from_hex("#23bd08")
                        theme_text_color: "Custom"
                        padding_y:10
                        

            MDStackLayout: 
                orientation:'lr-tb'
                size_hint: 0.2, 1   

                MDLabel:
                    text : ''
                    size_hint: 1, 0.2

                CircularProgressBar:
                    # pos: 400, 100
                    id:pbar
                    widget_size: 80
                    value : 1
                    size_hint: 0.2, None
                    thickness:5
                    progress_colour:(0, 1, 0, 1)  
                MDLabel:
                    text : ''
                    size_hint: 1, 0.75
                    

                    
        
        

        MDBoxLayout:
            id:graphContainer
            orientation:'horizontal'
            size_hint: 1, 1
            # md_bg_color: app.theme_cls.primary_color
          
            BoxLayout:
                id:graphContainerMain
                orientation:'horizontal'
                size_hint: 0.6, 1
               

            BoxLayout:
                id:graphContainerSecondary
                orientation:'horizontal'
                size_hint: 0.4, 1
            
                
        BoxLayout:
            orientation: 'vertical'
            size_hint: 1, 0.08
            spacing:5
            # Line:
            #     width:1
                # rounded_rectangle: (self.pos[0] + 4, self.pos[1], self.width - 6, self.height - 4, 2)

        MDTextFieldRect:
            id:logLabel
            text: ""
            font_size: 16
            multiline:True

        MDStackLayout: 
            orientation:'lr-tb'
            id:bLabel
            
            md_bg_color: app.theme_cls.primary_color
            size_hint_x : 1
            MDLabel:
                text : " "
                font_style: 'H4'
                size_hint: 1, 0.2
            MDLabel:
                id: bLabelHead
                theme_text_color: "Custom"
                text: "Real Growth, Real Engagement"
                text_color: get_color_from_hex("#FFFFFF")
                halign:"center"
                font_style: 'H5'
                size_hint: 1, 0.3

            MDLabel:
                id: bLabelText 
                theme_text_color: "Custom"
                text: "Your target filters, growth charts, and much more available \nat [u][ref=google.com]socialplannerpro.com[/ref][/u]"
                text_color: get_color_from_hex("#FFFFFF")
                halign:"center"
                size_hint : 1,None
                font_size: "20dp"
                markup:True
                size_hint: 1, 0.4
                on_ref_press:
                    import webbrowser
                    webbrowser.open("https://socialplannerpro.com/account/login/")
            MDLabel:
                text : " "
                font_style: 'H4'
                size_hint: 1, 0.1
           
                
                
           
            
        
   
