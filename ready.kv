#:kivy 1.9.0
#:import get_color_from_hex kivy.utils.get_color_from_hex
#import progressbar

<Ready>:
    canvas:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "data//bg.jpg"

    # MDBackdrop:
    #     id: backdrop
    #     # on_open: home.opening_animation_backdrop_components(backdrop, backlayer)
    #     # on_close:
    #     #     backlayer.ids.screen_manager.current = "settings"
    #     #     home.closing_animation_backdrop_components(backdrop, backlayer)
    #     # left_action_items: [['menu', lambda x: self.open()]]
    #     title: "Instagram Status"
    #     header_text: "Menu:"    
   
    
    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 1

        MDToolbar:
            id : tbar
            title: "Instagram Status"
            elevation: 10
            type: "top"
            right_action_items: [["ray-start-arrow", lambda x: root.startBot()],["reload", lambda x: root.RefreshManifest()],["details", lambda x: root.showLog()],["home-outline", lambda x: root.navToHome()],["logout", lambda x: root.logoutConfirm()]]
            # 
        
        MDBoxLayout:
            orientation:'vertical'
            md_bg_color: app.theme_cls.primary_light 
            size_hint: 1, 1  
        
        
            MDBoxLayout: # ig logo and label
                orientation: 'horizontal' 
                size_hint: 0.8, None  
                

                Image:
                    source: "data//iglogo.png"
                    size_hint: 0.2, None
                    size: dp(50), dp(50)
                    pos_hint: {"center_y": .5}

                MDLabel:
                    font_style: 'H5'
                    theme_text_color: 'Primary'
                    size_hint: 0.8, None
                    text: ""
                    halign: 'left'
                    valign : 'center'
                    id: lblusername
           
            MDBoxLayout: #labels and start button
                orientation:'vertical'
                size_hint: 1, None   
                md_bg_color: app.theme_cls.primary_dark   

                MDBoxLayout:
                    id: pnlNotStarted
                    size_hint: 0.8, None
                    orientation:'horizontal'
                    
                    MDLabel:
                        size_hint: 0.2, 1

                    MDLabel:
                        text: "Next growth session will start today at : "
                        id :lblAutoStartLabel
                        font_size: '20dp'
                        size_hint: 0.6, 1
                        halign:"left"

                    MDLabel:
                        text: ""
                        id :lblAutoStart
                        font_size: '22dp'
                        size_hint: 0.2, 1
                        halign:"left"
                        text_color: get_color_from_hex("#23bd08")
                        theme_text_color: "Custom"
                            

                        

                MDGridLayout:
                    id:pnlStarted
                    size_hint: 1, None
                    orientation:'horizontal'
                    cols : 4
                    # md_bg_color: get_color_from_hex("#23bd08")

                    MDLabel:
                        size_hint: 0.2, 0.5

                    MDLabel:
                        text: "Growth Session Started on"
                        font_size: '17dp'
                        size_hint: 0.6, 0.5
                        halign:"left"
                        valign:"top"
                        
                    
                    MDLabel:
                        id: lblStartTime
                        text: "03:33"
                        font_size: '20dp'
                        size_hint: 0.2, 0.5
                        halign:"left"
                        text_color: get_color_from_hex("#23bd08")
                        theme_text_color: "Custom"
                        valign:"top"

                    CircularProgressBar:
                        # pos: 400, 100
                        id:pbar
                        widget_size: 80
                        value : 1
                        size_hint: 0.2, None
                        thickness:5
                        progress_colour:(0, 1, 0, 1)
                    
                    MDLabel:
                        size_hint: 0.2, 0.5
    
                    MDLabel:
                        
                        text: "Estimated time remaining for this session to complete all actions :"
                        font_size: '17dp'
                        size_hint: 0.6, 0.5
                        halign:"left"
                        valign:"top"

                    MDLabel:
                        id: lblTotalTime
                        text: "1:33"
                        font_size: '20dp'
                        size_hint: 0.2, 0.5
                        halign:"left"
                        text_color: get_color_from_hex("#23bd08")
                        theme_text_color: "Custom"
                        valign:"top"

                    MDLabel:
                        text: " "
                        font_size: '15dp'
                        size_hint: 0.1, 0.5
                        halign:"left"


                    
                    

                    
        
        

        MDBoxLayout:
            id:graphContainer
            orientation:'horizontal'
            size_hint: 1, 1
            md_bg_color: app.theme_cls.primary_color

            BoxLayout:
                id:graphContainerMain
                orientation:'horizontal'
                size_hint: 0.6, 0.8

            BoxLayout:
                id:graphContainerSecondary
                orientation:'horizontal'
                size_hint: 0.4, 0.8
                
        # BoxLayout:
        #     orientation: 'vertical'
        #     size_hint: 1, 0.2
        #     spacing:5
        #     # Line:
        #     #     width:1
        #         # rounded_rectangle: (self.pos[0] + 4, self.pos[1], self.width - 6, self.height - 4, 2)

        MDTextFieldRect:
            id:logLabel
            text: ""
            font_size: 16
            multiline:True

        MDBoxLayout:
            id:bLabel
            orientation:'vertical'
            md_bg_color: app.theme_cls.primary_color
            size_hint_x : 1
            MDLabel:
                text : " "
                font_style: 'H4'
            MDLabel:
                theme_text_color: "Custom"
                text: "Real Growth, Real Engagement"
                text_color: get_color_from_hex("#FFFFFF")
                halign:"center"
                font_style: 'H5'

            MDLabel:
                theme_text_color: "Custom"
                text: "Your target filters, growth charts, and much more available \nat [u][ref=google.com]socialplannerpro.com[/ref][/u]"
                text_color: get_color_from_hex("#FFFFFF")
                halign:"center"
                size_hint : 1,None
                font_size: "20dp"
                markup:True
                on_ref_press:
                    import webbrowser
                    webbrowser.open("https://socialplannerpro.com/account/login/")
           
                
                
           
            
        
   
